import{l as u,f as ve,u as we,y as ye,x as H,j as a}from"./index-ChNr1GaT.js";import{g as Ce,e as De,f as Oe,c as Pe,h as i,d as z,O as Ie}from"./Title-DqhdHHkm.js";function je(p){const h=u.useRef(void 0);return u.useEffect(()=>{h.current=p},[p]),h.current}const Ve={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},L=ve((p,h)=>{const E=we("Select",Ve,p),{classNames:U,styles:W,unstyled:f,vars:Ee,dropdownOpened:$,defaultDropdownOpened:q,onDropdownClose:_,onDropdownOpen:v,onFocus:w,onBlur:y,onClick:C,onChange:G,data:k,value:b,defaultValue:J,selectFirstOptionOnChange:D,onOptionSubmit:O,comboboxProps:K,readOnly:g,disabled:m,filter:Q,limit:X,withScrollArea:Y,maxDropdownHeight:Z,size:P,searchable:n,rightSection:ee,checkIconPosition:te,withCheckIcon:oe,nothingFoundMessage:F,name:le,form:se,searchValue:ae,defaultSearchValue:ne,onSearchChange:re,allowDeselect:ce,error:N,rightSectionPointerEvents:ie,id:ue,clearable:de,clearButtonProps:pe,hiddenInputProps:he,renderOption:fe,onClear:I,autoComplete:be,scrollAreaProps:ge,__defaultRightSection:ke,__clearSection:Fe,__clearable:Ne,chevronColor:me,...S}=E,j=u.useMemo(()=>Ce(k),[k]),d=u.useMemo(()=>De(j),[j]),R=ye(ue),[l,B,Se]=H({value:b,defaultValue:J,finalValue:null,onChange:G}),o=typeof l=="string"?d[l]:void 0,r=je(o),[x,xe]=H({value:ae,defaultValue:ne,finalValue:o?o.label:"",onChange:re}),t=Oe({opened:$,defaultOpened:q,onDropdownOpen:()=>{v==null||v(),t.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{_==null||_(),t.resetSelectedOption()}}),c=e=>{xe(e),t.resetSelectedOption()},{resolvedClassNames:A,resolvedStyles:M}=Pe({props:E,styles:W,classNames:U});u.useEffect(()=>{D&&t.selectFirstOption()},[D,x]),u.useEffect(()=>{b===null&&c(""),typeof b=="string"&&o&&((r==null?void 0:r.value)!==o.value||(r==null?void 0:r.label)!==o.label)&&c(o.label)},[b,o]);const _e=a.jsx(i.ClearButton,{...pe,onClear:()=>{B(null,null),c(""),I==null||I()}}),T=de&&!!l&&!m&&!g;return a.jsxs(a.Fragment,{children:[a.jsxs(i,{store:t,__staticSelector:"Select",classNames:A,styles:M,unstyled:f,readOnly:g,onOptionSubmit:e=>{O==null||O(e);const s=ce&&d[e].value===l?null:d[e],V=s?s.value:null;V!==l&&B(V,s),!Se&&c(typeof V=="string"&&(s==null?void 0:s.label)||""),t.closeDropdown()},size:P,...K,children:[a.jsx(i.Target,{targetType:n?"input":"button",autoComplete:be,children:a.jsx(z,{id:R,ref:h,__defaultRightSection:a.jsx(i.Chevron,{size:P,error:N,unstyled:f,color:me}),__clearSection:_e,__clearable:T,rightSection:ee,rightSectionPointerEvents:ie||(T?"all":"none"),...S,size:P,__staticSelector:"Select",disabled:m,readOnly:g||!n,value:x,onChange:e=>{c(e.currentTarget.value),t.openDropdown(),D&&t.selectFirstOption()},onFocus:e=>{n&&t.openDropdown(),w==null||w(e)},onBlur:e=>{var s;n&&t.closeDropdown(),c(l!=null&&((s=d[l])==null?void 0:s.label)||""),y==null||y(e)},onClick:e=>{n?t.openDropdown():t.toggleDropdown(),C==null||C(e)},classNames:A,styles:M,unstyled:f,pointer:!n,error:N})}),a.jsx(Ie,{data:j,hidden:g||m,filter:Q,search:x,limit:X,hiddenWhenEmpty:!F,withScrollArea:Y,maxDropdownHeight:Z,filterOptions:n&&(o==null?void 0:o.label)!==x,value:l,checkIconPosition:te,withCheckIcon:oe,nothingFoundMessage:F,unstyled:f,labelId:S.label?`${R}-label`:void 0,"aria-label":S.label?void 0:S["aria-label"],renderOption:fe,scrollAreaProps:ge})]}),a.jsx(i.HiddenInput,{value:l,name:le,form:se,disabled:m,...he})]})});L.classes={...z.classes,...i.classes};L.displayName="@mantine/core/Select";export{L as S};
